# Coinnect Backend Environment Configuration
# Copy this file to .env and configure with your actual values
# DO NOT commit .env to version control

# ============================================================================
# SERIAL PORT CONFIGURATION
# ============================================================================

# Arduino Mega #1 - Bill Controller (sorting + dispensing)
# Use symlink for reliability (created by udev rules): /dev/coinnect_bill
# Or use direct device path: /dev/ttyUSB0
SERIAL_PORT_BILL=/dev/coinnect_bill

# Arduino Mega #2 - Coin & Security Controller
# Use symlink for reliability (created by udev rules): /dev/coinnect_coin
# Or use direct device path: /dev/ttyACM0
SERIAL_PORT_COIN=/dev/coinnect_coin

# Serial baud rate (must match firmware settings)
BAUD_RATE=115200

# Serial timeout in seconds
SERIAL_TIMEOUT=5

# ============================================================================
# CAMERA CONFIGURATION
# ============================================================================

# USB camera device index (usually 0 for first camera)
# If you have multiple cameras, try 1, 2, etc.
CAMERA_INDEX=0

# Camera resolution (width x height)
CAMERA_WIDTH=1920
CAMERA_HEIGHT=1080

# Camera FPS
CAMERA_FPS=30

# ============================================================================
# MACHINE LEARNING CONFIGURATION
# ============================================================================

# Path to YOLO model for bill authentication
# This model is used to detect and classify bill denominations
YOLO_MODEL_PATH=/home/pi/coinnect/backend/app/ml/models/bill_auth.pt

# ML confidence threshold (0.0 to 1.0)
# Bills with confidence below this threshold will be rejected
ML_CONFIDENCE_THRESHOLD=0.85

# ============================================================================
# PAYMENT PROVIDER API KEYS (ONLINE MODE)
# ============================================================================

# GCash API Configuration
GCASH_API_KEY=your_gcash_api_key_here
GCASH_API_SECRET=your_gcash_api_secret_here
GCASH_API_URL=https://api.gcash.com/v1

# Maya (PayMaya) API Configuration
MAYA_API_KEY=your_maya_api_key_here
MAYA_API_SECRET=your_maya_api_secret_here
MAYA_API_URL=https://api.maya.com/v1

# ============================================================================
# APPLICATION SETTINGS
# ============================================================================

# Application environment: development, staging, production
ENVIRONMENT=production

# Log level: DEBUG, INFO, WARNING, ERROR, CRITICAL
LOG_LEVEL=INFO

# Enable offline mode (money changer only, no e-wallet transactions)
ENABLE_OFFLINE_MODE=true

# ============================================================================
# SERVER CONFIGURATION
# ============================================================================

# FastAPI server host (0.0.0.0 for all interfaces)
HOST=0.0.0.0

# FastAPI server port
PORT=8000

# Enable API documentation (Swagger UI)
# Set to false in production for security
ENABLE_DOCS=false

# ============================================================================
# HARDWARE SETTINGS
# ============================================================================

# GPIO pins for RPi-controlled hardware (bill acceptor system)
GPIO_MOTOR_IN1=17
GPIO_MOTOR_IN2=27
GPIO_MOTOR_ENA=22
GPIO_IR_ENTRY=5
GPIO_IR_POSITION=6
GPIO_UV_LED=23
GPIO_WHITE_LED=24

# Hardware timeouts (in seconds)
BILL_ACCEPTANCE_TIMEOUT=10
SORTING_MOVE_TIMEOUT=8
DISPENSE_TIMEOUT=5
COIN_DISPENSE_TIMEOUT=3

# ============================================================================
# BUSINESS LOGIC CONFIGURATION
# ============================================================================

# Minimum and maximum transaction amounts (in PHP)
MIN_TRANSACTION_AMOUNT=100
MAX_TRANSACTION_AMOUNT=50000

# Transaction session timeout (in seconds)
SESSION_TIMEOUT=180

# Low inventory alert thresholds
LOW_BILL_THRESHOLD=10
LOW_COIN_THRESHOLD=50

# ============================================================================
# DATABASE CONFIGURATION (IF APPLICABLE)
# ============================================================================

# SQLite database path (for local persistence)
DATABASE_PATH=/home/pi/coinnect/data/coinnect.db

# Enable write-ahead logging (for power loss recovery)
ENABLE_WAL=true

# ============================================================================
# SECURITY SETTINGS
# ============================================================================

# RFID reader configuration (for technician access)
RFID_ENABLED=true
RFID_PORT=/dev/ttyUSB1

# Tamper detection sensitivity (1-10, higher = more sensitive)
TAMPER_SENSITIVITY=5

# Security lockdown duration (in seconds, 0 = manual unlock only)
LOCKDOWN_DURATION=0

# ============================================================================
# PRINTER CONFIGURATION
# ============================================================================

# Receipt printer device path
PRINTER_PORT=/dev/usb/lp0

# Printer type: thermal, inkjet
PRINTER_TYPE=thermal

# Enable receipt printing
ENABLE_RECEIPT_PRINTING=true

# ============================================================================
# NETWORKING (OPTIONAL)
# ============================================================================

# API rate limiting (requests per minute)
RATE_LIMIT=60

# CORS allowed origins (comma-separated)
CORS_ORIGINS=http://localhost:3000,http://localhost:5173

# ============================================================================
# MONITORING & TELEMETRY (OPTIONAL)
# ============================================================================

# Enable telemetry (usage statistics, error reporting)
ENABLE_TELEMETRY=false

# Sentry DSN for error tracking (if using Sentry)
SENTRY_DSN=

# ============================================================================
# DEVELOPMENT SETTINGS (WINDOWS ONLY)
# ============================================================================

# Use mock serial ports for testing without hardware
USE_MOCK_SERIAL=false

# Mock delay for simulating hardware operations (in seconds)
MOCK_DELAY=1.0
